# -*- coding: utf-8 -*-
"""preprocess.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/10Jjz8zCIYFliOfRi0nLQQgOuuSsOB1y6

Project 1 group 8

Read data from file
"""

import os
import codecs
def readfile(filename,filepath=None):
	current_path=os.path.abspath(os.curdir)
	file_path=os.path.join(current_path,filename)
	if not os.path.exists(file_path):
		print("error:file not found:"+filename)
		return ""
	f=codecs.open(file_path,"r","utf-8")
	s=f.read()
	f.close()
	return s
test_data=readfile("test-public.txt")
test_data=test_data.splitlines()
print("length of testing data:"+str(len(test_data)))
train_data=readfile("train.txt")
train_data=train_data.splitlines()
print("length of training data:"+str(len(train_data)))

"""preprocessing data

format: a list of dictionary {Id, Source, Sink}

- training data
"""

train_list=[]
i=1
for temp_str in train_data:
  temp=temp_str.split('\t')
  for j in range(1,len(temp)):
    temp_dict={}
    temp_dict['Id']=i
    temp_dict['Source']=temp[0]
    temp_dict['Sink']=temp[j]
    train_list.append(temp_dict)
    i=i+1
print("preprocessed training data length:"+str(len(train_list)))

"""- testing data"""

test_list=[]
del test_data[0]
for temp_str in test_data:
  temp=temp_str.split('\t')
  temp_dict={}
  temp_dict['Id']=temp[0]
  temp_dict['Source']=temp[1]
  temp_dict['Sink']=temp[2]
  test_list.append(temp_dict)
print("preprocessed testing data length:"+str(len(test_list)))